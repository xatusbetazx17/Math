<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MA025 Algebra Practice – All Tests</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      margin: 0;
      padding: 0;
      background: #0f172a;
      color: #e5e7eb;
    }

    .app {
      max-width: 900px;
      margin: 0 auto;
      padding: 1.5rem 1rem 3rem;
    }

    h1,
    h2 {
      text-align: center;
      margin-top: 0;
    }

    h1 {
      font-size: 1.6rem;
      margin-bottom: 0.5rem;
    }

    h2 {
      font-size: 1.2rem;
      margin-bottom: 0.75rem;
    }

    p {
      line-height: 1.5;
    }

    .card {
      background: #020617;
      border-radius: 0.75rem;
      padding: 1rem 1.25rem;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.9);
      border: 1px solid #1e293b;
      margin-bottom: 1rem;
    }

    label {
      display: block;
    }

    .field-group {
      margin-bottom: 0.75rem;
    }

    .field-label {
      display: block;
      font-size: 0.9rem;
      margin-bottom: 0.25rem;
      color: #9ca3af;
    }

    select,
    input[type="number"] {
      width: 100%;
      padding: 0.4rem 0.6rem;
      border-radius: 0.5rem;
      border: 1px solid #1f2933;
      background: #020617;
      color: #e5e7eb;
      font-size: 0.95rem;
    }

    select:focus,
    input[type="number"]:focus {
      outline: 2px solid #38bdf8;
      border-color: #38bdf8;
    }

    .btn-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }

    button {
      border-radius: 999px;
      border: none;
      padding: 0.45rem 0.9rem;
      font-size: 0.9rem;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.05s ease, box-shadow 0.05s ease,
        background-color 0.15s ease;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }

    button.primary {
      background: linear-gradient(135deg, #38bdf8, #6366f1);
      color: #0b1120;
      box-shadow: 0 8px 20px rgba(56, 189, 248, 0.35);
    }

    button.secondary {
      background: #111827;
      color: #e5e7eb;
      border: 1px solid #1f2937;
    }

    button:disabled {
      opacity: 0.55;
      cursor: not-allowed;
      box-shadow: none;
      transform: none;
    }

    button:not(:disabled):active {
      transform: translateY(1px);
      box-shadow: 0 4px 10px rgba(15, 23, 42, 0.65);
    }

    .hidden {
      display: none;
    }

    #questionCounter {
      font-size: 0.9rem;
      color: #9ca3af;
      margin-bottom: 0.35rem;
    }

    #questionText {
      font-size: 1rem;
      margin-bottom: 0.75rem;
    }

    .choices {
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
      margin-bottom: 0.75rem;
    }

    .choice-label {
      display: flex;
      gap: 0.5rem;
      padding: 0.4rem 0.6rem;
      border-radius: 0.5rem;
      background: #020617;
      border: 1px solid #1e293b;
      cursor: pointer;
      align-items: flex-start;
    }

    .choice-label:hover {
      border-color: #38bdf8;
    }

    .choice-label input[type="radio"] {
      margin-top: 0.2rem;
    }

    .choice-text strong {
      color: #e5e7eb;
    }

    .feedback {
      margin-top: 0.35rem;
      font-size: 0.9rem;
    }

    .feedback p {
      margin: 0.25rem 0;
    }

    .correct {
      color: #4ade80;
    }

    .incorrect {
      color: #f97373;
    }

    .explanation {
      color: #e5e7eb;
    }

    #summary {
      margin-bottom: 0.75rem;
    }

    #reviewList {
      padding-left: 1.2rem;
      margin: 0.5rem 0 1rem;
    }

    #reviewList li {
      margin-bottom: 0.5rem;
    }

    code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
        "Liberation Mono", "Courier New", monospace;
      font-size: 0.95em;
      background: #020617;
      padding: 0.15rem 0.35rem;
      border-radius: 0.35rem;
    }

    @media (min-width: 640px) {
      .setup-grid {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 0.75rem;
      }

      .field-group {
        margin-bottom: 0;
      }

      .btn-row {
        justify-content: flex-end;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <h1>MA025 Algebra Practice – All Tests</h1>
    <p style="text-align:center; font-size:0.9rem; color:#9ca3af;">
      Choose a test, difficulty, and number of questions. Everything runs offline in this one HTML file.
    </p>

    <!-- SETUP / MENU -->
    <section id="setup" class="card">
      <h2>1. Choose your practice mode</h2>
      <div class="setup-grid">
        <div class="field-group">
          <label class="field-label" for="modeSelect">Test / mode</label>
          <select id="modeSelect">
            <option value="test1">Test 1 – Warm‑up basics</option>
            <option value="test2">Test 2 – Linear equations & systems</option>
            <option value="test3" selected>Test 3 – Full MA025 Final Review (35 Q)</option>
            <option value="test4">Test 4 – Factoring & exponents</option>
            <option value="all">All tests mixed together</option>
          </select>
        </div>

        <div class="field-group">
          <label class="field-label" for="difficultySelect">Difficulty filter</label>
          <select id="difficultySelect">
            <option value="any" selected>Any difficulty</option>
            <option value="easy">Easy only</option>
            <option value="medium">Medium only</option>
            <option value="hard">Hard only</option>
          </select>
        </div>

        <div class="field-group">
          <label class="field-label" for="questionCount">
            Number of questions (leave blank for full test)
          </label>
          <input
            id="questionCount"
            type="number"
            min="1"
            placeholder="e.g. 10"
          />
        </div>
      </div>

      <div class="btn-row">
        <button id="startButton" class="primary">
          ▶ Start quiz
        </button>
      </div>
    </section>

    <!-- QUIZ VIEW -->
    <section id="quiz" class="card hidden">
      <h2>2. Answer the questions</h2>
      <div id="questionCounter"></div>
      <div id="questionText"></div>

      <div id="choices" class="choices"></div>

      <div class="btn-row">
        <button id="prevButton" class="secondary">⟨ Previous</button>
        <button id="checkButton" class="primary">✔ Check answer</button>
        <button id="nextButton" class="secondary" disabled>
          Next question ⟩
        </button>
      </div>

      <div id="feedback" class="feedback"></div>
    </section>

    <!-- RESULTS VIEW -->
    <section id="results" class="card hidden">
      <h2>3. Results & review</h2>
      <p id="summary"></p>
      <ol id="reviewList"></ol>
      <div class="btn-row">
        <button id="restartButton" class="primary">⬅ Back to menu</button>
      </div>
    </section>
  </div>

  <script>
    // ============================
    // Question banks
    // ============================

    // Test 1 – warm‑up basics
    const test1Questions = [
      {
        id: "t1q1",
        testId: "Test 1",
        difficulty: "easy",
        text: `Evaluate the expression:<br><code>3(4) + 5</code>`,
        choices: {
          a: "12",
          b: "15",
          c: "17",
          d: "19",
        },
        correct: "c",
        explanation:
          "First multiply: 3 × 4 = 12. Then add 5: 12 + 5 = 17. Multiplication happens before addition in the order of operations.",
      },
      {
        id: "t1q2",
        testId: "Test 1",
        difficulty: "easy",
        text: `Solve for <code>x</code>:<br><code>x + 7 = 15</code>`,
        choices: {
          a: "7",
          b: "8",
          c: "22",
          d: "-8",
        },
        correct: "b",
        explanation:
          "Subtract 7 from both sides to undo the +7: x = 15 − 7 = 8.",
      },
      {
        id: "t1q3",
        testId: "Test 1",
        difficulty: "easy",
        text: `Evaluate the absolute value:<br><code>|-5|</code>`,
        choices: {
          a: "-5",
          b: "0",
          c: "5",
          d: "-10",
        },
        correct: "c",
        explanation:
          "Absolute value is the distance from 0 on the number line, so |−5| = 5.",
      },
      {
        id: "t1q4",
        testId: "Test 1",
        difficulty: "medium",
        text: `Solve the inequality:<br><code>2x - 3 &gt; 7</code>`,
        choices: {
          a: "x &gt; 5",
          b: "x ≥ 5",
          c: "x &lt; 5",
          d: "x ≤ 5",
        },
        correct: "a",
        explanation:
          "Add 3 to both sides: 2x &gt; 10. Divide both sides by 2 (positive, so the inequality direction stays the same): x &gt; 5.",
      },
      {
        id: "t1q5",
        testId: "Test 1",
        difficulty: "medium",
        text: `Which expression represents: “the sum of a number <code>n</code> and 9”?`,
        choices: {
          a: "9 - n",
          b: "n + 9",
          c: "n - 9",
          d: "9n",
        },
        correct: "b",
        explanation:
          "“Sum” means addition, and the order is number n plus 9, so the expression is n + 9.",
      },
      {
        id: "t1q6",
        testId: "Test 1",
        difficulty: "medium",
        text: `Evaluate:<br><code>2(3^2)</code>`,
        choices: {
          a: "6",
          b: "9",
          c: "12",
          d: "18",
        },
        correct: "d",
        explanation:
          "Exponents first: 3² = 9. Then multiply by 2: 2 × 9 = 18.",
      },
    ];

    // Test 2 – linear equations & systems
    const test2Questions = [
      {
        id: "t2q1",
        testId: "Test 2",
        difficulty: "easy",
        text: `Solve for <code>x</code>:<br><code>3x - 2 = 10</code>`,
        choices: {
          a: "x = 3",
          b: "x = 4",
          c: "x = 6",
          d: "x = 8",
        },
        correct: "b",
        explanation:
          "Add 2 to both sides: 3x = 12. Then divide by 3: x = 12 ÷ 3 = 4.",
      },
      {
        id: "t2q2",
        testId: "Test 2",
        difficulty: "medium",
        text: `Find the equation of the line with slope 2 that passes through (0, -1). Write your answer in slope‑intercept form.`,
        choices: {
          a: "y = 2x + 1",
          b: "y = 2x - 1",
          c: "y = -2x - 1",
          d: "y = -2x + 1",
        },
        correct: "b",
        explanation:
          "When x = 0, y = -1 is the y‑intercept, so b = -1. With slope m = 2, the equation is y = 2x - 1.",
      },
      {
        id: "t2q3",
        testId: "Test 2",
        difficulty: "medium",
        text: `Find the slope of the line passing through (2, 5) and (5, 11).`,
        choices: {
          a: "m = 2",
          b: "m = 3",
          c: "m = 4",
          d: "m = 6",
        },
        correct: "a",
        explanation:
          "Use slope formula: m = (11 − 5)/(5 − 2) = 6/3 = 2.",
      },
      {
        id: "t2q4",
        testId: "Test 2",
        difficulty: "medium",
        text: `Solve the system:<br><code>x + y = 7</code><br><code>x - y = 1</code>`,
        choices: {
          a: "(x, y) = (3, 4)",
          b: "(x, y) = (4, 3)",
          c: "(x, y) = (2, 5)",
          d: "(x, y) = (5, 2)",
        },
        correct: "b",
        explanation:
          "Add the equations: (x + y) + (x − y) = 7 + 1 → 2x = 8 → x = 4. Substitute into x + y = 7 → 4 + y = 7 → y = 3.",
      },
      {
        id: "t2q5",
        testId: "Test 2",
        difficulty: "medium",
        text: `Solve for <code>x</code>:<br><code>-4(x - 3) = 2x + 6</code>`,
        choices: {
          a: "x = -1",
          b: "x = 0",
          c: "x = 1",
          d: "x = 3",
        },
        correct: "c",
        explanation:
          "Distribute on the left: -4x + 12 = 2x + 6. Add 4x to both sides: 12 = 6x + 6. Subtract 6: 6 = 6x → x = 1.",
      },
    ];

    // Test 3 – full MA025 Final Review (35 questions from your exam)
    const test3Questions = [
      {
        id: "t3q1",
        testId: "Test 3",
        difficulty: "easy",
        text: `Use the commutative or associative property to complete the statement:<br><code>-2 · 5 = 5 · ____</code>`,
        choices: {
          a: "-2; associative property",
          b: "2; associative property",
          c: "2; commutative property",
          d: "-2; commutative property",
        },
        correct: "d",
        explanation:
          "The commutative property of multiplication says a·b = b·a. We can swap −2 and 5, but we do not change the sign. So the blank is −2 and the property is commutative.",
      },
      {
        id: "t3q2",
        testId: "Test 3",
        difficulty: "easy",
        text: `The perimeter of a rectangle is given by <code>P = 2L + 2W</code>. Solve this formula for <code>L</code>.`,
        choices: {
          a: "L = P - 2W",
          b: "L = P - W",
          c: "L = (P - 2W) / 2",
          d: "L = (P - W) / 2",
        },
        correct: "c",
        explanation:
          "Subtract 2W from both sides: P − 2W = 2L. Then divide both sides by 2 to isolate L: L = (P − 2W) / 2.",
      },
      {
        id: "t3q3",
        testId: "Test 3",
        difficulty: "easy",
        text: `An appliance store gives a 9% discount for paying cash. A customer receives a discount of $52. What was the total bill before the discount (to the nearest dollar)?`,
        choices: {
          a: "$6",
          b: "$578",
          c: "$5",
          d: "$500",
        },
        correct: "b",
        explanation:
          "Let the original price be P. The discount amount is 0.09P = 52, so P = 52 ÷ 0.09 = 577.77… ≈ $578.",
      },
      {
        id: "t3q4",
        testId: "Test 3",
        difficulty: "easy",
        text: `A baseball team won 2 games by 5 runs each, lost 3 games by 3 runs each, lost 1 game by 8 runs, and won its last 4 games by 2 runs each. Over 10 games total, what is the net run difference (team's runs minus opponents' runs)?`,
        choices: {
          a: "+1 run",
          b: "+2 runs",
          c: "+17 runs",
          d: "-4 runs",
        },
        correct: "a",
        explanation:
          "Two wins by 5 → +10. Three losses by 3 → −9. One loss by 8 → −8. Four wins by 2 → +8. Total = 10 − 9 − 8 + 8 = 1 run.",
      },
      {
        id: "t3q5",
        testId: "Test 3",
        difficulty: "medium",
        text: `Which description matches the graph of the equation <code>y + 4 = 0</code>?`,
        choices: {
          a: "A vertical line crossing the x‑axis at x = -4",
          b: "A vertical line crossing the x‑axis at x = 4",
          c: "A horizontal line crossing the y‑axis at y = -4",
          d: "A horizontal line crossing the y‑axis at y = 4",
        },
        correct: "c",
        explanation:
          "y + 4 = 0 can be rewritten as y = -4, which is a horizontal line 4 units below the origin. Vertical lines have equations like x = constant.",
      },
      {
        id: "t3q6",
        testId: "Test 3",
        difficulty: "medium",
        text: `Find the slope of the line passing through the points (-9, 3) and (6, 8).`,
        choices: {
          a: "6",
          b: "1/6",
          c: "3",
          d: "1/3",
        },
        correct: "d",
        explanation:
          "Slope m = (y₂ − y₁)/(x₂ − x₁) = (8 − 3)/(6 − (−9)) = 5/15 = 1/3.",
      },
      {
        id: "t3q7",
        testId: "Test 3",
        difficulty: "medium",
        text: `Solve the inequality <code>-7x ≥ 21</code>. Write the solution in interval notation.`,
        choices: {
          a: "[3, ∞)",
          b: "[-3, ∞)",
          c: "(-∞, -3]",
          d: "(-∞, 3]",
        },
        correct: "c",
        explanation:
          "Divide both sides by −7. The inequality flips: x ≤ 21 / (−7) = −3. In interval notation that is (−∞, −3].",
      },
      {
        id: "t3q8",
        testId: "Test 3",
        difficulty: "medium",
        text: `Solve the system by elimination:<br><code>x + 9y = 9</code><br><code>7x - 5y = -5</code>`,
        choices: {
          a: "{(1, 0)}",
          b: "{(0, 1)}",
          c: "{(1, 1)}",
          d: "{(0, 0)}",
        },
        correct: "b",
        explanation:
          "Multiply the first equation by 5: 5x + 45y = 45. Multiply the second by 9: 63x − 45y = −45. Add them: 68x = 0 → x = 0. Substitute into x + 9y = 9 → 9y = 9 → y = 1.",
      },
      {
        id: "t3q9",
        testId: "Test 3",
        difficulty: "medium",
        text: `Solve:<br><code>(x - 7)/4 = (x + 8)/7</code>`,
        choices: {
          a: "81/28",
          b: "7/4",
          c: "8",
          d: "27",
        },
        correct: "d",
        explanation:
          "Multiply both sides by 28: 7(x − 7) = 4(x + 8). Then 7x − 49 = 4x + 32 → 3x = 81 → x = 27.",
      },
      {
        id: "t3q10",
        testId: "Test 3",
        difficulty: "medium",
        text: `Solve:<br><code>6w + 9 = 10 - 7w - 6w</code>`,
        choices: {
          a: "w = -19",
          b: "w = 1/19",
          c: "w = 19",
          d: "w = -1/13",
        },
        correct: "b",
        explanation:
          "Combine like terms on the right: 10 − 13w. So 6w + 9 = 10 − 13w. Add 13w: 19w + 9 = 10. Subtract 9: 19w = 1 → w = 1/19.",
      },
      {
        id: "t3q11",
        testId: "Test 3",
        difficulty: "medium",
        text: `Solve:<br><code>-4(x + 5) = -(4x + 20)</code>`,
        choices: {
          a: "All real numbers",
          b: "No solution",
          c: "{5}",
          d: "{0}",
        },
        correct: "a",
        explanation:
          "Distribute: left side −4x − 20; right side −4x − 20. Both sides are identical for any x, so every real number is a solution.",
      },
      {
        id: "t3q12",
        testId: "Test 3",
        difficulty: "medium",
        text: `Solve for <code>x</code>:<br><code>(2/5)x - (1/3)x = 2</code>`,
        choices: {
          a: "x = -60",
          b: "x = 60",
          c: "x = -30",
          d: "x = 30",
        },
        correct: "d",
        explanation:
          "Combine the fractions: 2/5 − 1/3 = 6/15 − 5/15 = 1/15. So (1/15)x = 2 → x = 2 × 15 = 30.",
      },
      {
        id: "t3q13",
        testId: "Test 3",
        difficulty: "medium",
        text: `Solve:<br><code>x² - x = 56</code>`,
        choices: {
          a: "{1, 56}",
          b: "{-7, -8}",
          c: "{-7, 8}",
          d: "{7, 8}",
        },
        correct: "c",
        explanation:
          "Rewrite as x² − x − 56 = 0. Factor: (x − 8)(x + 7) = 0 → x = 8 or x = −7.",
      },
      {
        id: "t3q14",
        testId: "Test 3",
        difficulty: "hard",
        text: `Write an equation in slope‑intercept form for the line through (-7, 1) and (10, -5).`,
        choices: {
          a: "y = (8/15)x + 1/3",
          b: "y = -(8/15)x + 1/3",
          c: "y = -(6/17)x - 25/17",
          d: "y = (6/17)x - 25/17",
        },
        correct: "c",
        explanation:
          "Slope m = (-5 − 1)/(10 − (−7)) = -6/17. Using point-slope with point (-7,1): y − 1 = (-6/17)(x + 7). Simplify to y = (-6/17)x − 25/17.",
      },
      {
        id: "t3q15",
        testId: "Test 3",
        difficulty: "hard",
        text: `Factor completely or state that the polynomial is prime:<br><code>x² + 43x + 44</code>`,
        choices: {
          a: "(x + 44)(x - 1)",
          b: "(x - 11)(x + 4)",
          c: "(x + 11)(x - 4)",
          d: "Prime",
        },
        correct: "d",
        explanation:
          "We need two integers with product 44 and sum 43; no such pair exists (1 + 44 = 45, 2 + 22 = 24, 4 + 11 = 15). So it does not factor over the integers → prime.",
      },
      {
        id: "t3q16",
        testId: "Test 3",
        difficulty: "medium",
        text: `Evaluate <code>(3x + 7) / (14 - 2y)</code> when <code>x = 9</code> and <code>y = 6</code>.`,
        choices: {
          a: "39",
          b: "34",
          c: "14",
          d: "17",
        },
        correct: "d",
        explanation:
          "Compute numerator: 3·9 + 7 = 27 + 7 = 34. Denominator: 14 − 2·6 = 14 − 12 = 2. So the value is 34 ÷ 2 = 17.",
      },
      {
        id: "t3q17",
        testId: "Test 3",
        difficulty: "medium",
        text: `Evaluate <code>9x - 2y²</code> when <code>x = 3</code> and <code>y = -4</code>.`,
        choices: {
          a: "59",
          b: "-5",
          c: "11",
          d: "19",
        },
        correct: "b",
        explanation:
          "First y² = (-4)² = 16. Then 9x − 2y² = 9·3 − 2·16 = 27 − 32 = -5.",
      },
      {
        id: "t3q18",
        testId: "Test 3",
        difficulty: "medium",
        text: `Solve the system by substitution:<br><code>x - 5y = 15</code><br><code>-4x - 4y = 12</code>`,
        choices: {
          a: "{(3, 0)}",
          b: "{(1, -4)}",
          c: "{(0, -3)}",
          d: "No solution",
        },
        correct: "c",
        explanation:
          "From x − 5y = 15 → x = 5y + 15. Substitute into −4x − 4y = 12: −4(5y + 15) − 4y = 12 → −20y − 60 − 4y = 12 → −24y = 72 → y = −3. Then x = 5(−3) + 15 = 0.",
      },
      {
        id: "t3q19",
        testId: "Test 3",
        difficulty: "medium",
        text: `Perform the division:<br><code>(y² + 18y + 81) / (y + 9)</code>`,
        choices: {
          a: "y - 9",
          b: "y + 9",
          c: "(y + 9) / (y + 9)",
          d: "y² + 9",
        },
        correct: "b",
        explanation:
          "Factor the numerator: y² + 18y + 81 = (y + 9)². Dividing by (y + 9) leaves y + 9.",
      },
      {
        id: "t3q20",
        testId: "Test 3",
        difficulty: "medium",
        text: `Complete the factoring:<br><code>x² - 13x + 42 = (x - 7)(_____)</code>`,
        choices: {
          a: "x - 6",
          b: "7 - x",
          c: "x + 6",
          d: "x² + 7",
        },
        correct: "a",
        explanation:
          "We need two numbers with product 42 and sum −13: −7 and −6. So x² − 13x + 42 = (x − 7)(x − 6); the missing factor is x − 6.",
      },
      {
        id: "t3q21",
        testId: "Test 3",
        difficulty: "easy",
        text: `Write a numerical expression for the phrase and simplify.<br>“The product of -9 and 1, subtracted from -5.”`,
        choices: {
          a: "-5 + (-9)(1); result = -14",
          b: "(-5)(-9)(1); result = 45",
          c: "-5 - (-9)(1); result = 4",
          d: "; result = 4",
        },
        correct: "c",
        explanation:
          "‘Product of -9 and 1’ is (−9)(1). ‘Subtracted from -5’ means −5 minus that product: −5 − (−9·1) = −5 − (−9) = −5 + 9 = 4.",
      },
      {
        id: "t3q22",
        testId: "Test 3",
        difficulty: "medium",
        text: `Write the rational expression in lowest terms:<br><code>(16x + 20) / (20x + 25)</code>`,
        choices: {
          a: "5/4",
          b: "1",
          c: "4/5",
          d: "4",
        },
        correct: "c",
        explanation:
          "Factor numerator: 4(4x + 5). Denominator: 5(4x + 5). Cancel (4x + 5) to get 4/5.",
      },
      {
        id: "t3q23",
        testId: "Test 3",
        difficulty: "medium",
        text: `Write the rational expression in lowest terms:<br><code>(a² - 6a) / [(a + 9)(a - 6)]</code>`,
        choices: {
          a: "1 / (a + 9)",
          b: "(a - 6) / (a + 9)",
          c: "a / (a + 9)",
          d: "a² / (a + 9)",
        },
        correct: "c",
        explanation:
          "Factor the numerator: a² − 6a = a(a − 6). Cancel (a − 6) with the denominator, leaving a/(a + 9).",
      },
      {
        id: "t3q24",
        testId: "Test 3",
        difficulty: "medium",
        text: `Simplify the radical expression (assume non‑negative variables):<br><code>(√(7t) + √r)²</code>`,
        choices: {
          a: "49t² + 2√(7tr) + r²",
          b: "7t + 2√(7tr) + r",
          c: "7t + 7tr + r",
          d: "49t² + √(7tr) + r²",
        },
        correct: "b",
        explanation:
          "Use (a + b)² = a² + 2ab + b². Here a = √(7t), b = √r. Then a² = 7t, b² = r, and 2ab = 2√(7tr). So the result is 7t + 2√(7tr) + r.",
      },
      {
        id: "t3q25",
        testId: "Test 3",
        difficulty: "medium",
        text: `Simplify:<br><code>(7x + 30xy - 28y) - (14x - 29xy - 25y)</code>`,
        choices: {
          a: "-7x + 59xy - 3y",
          b: "-7x - 59xy - 53y",
          c: "49xy",
          d: "-23x + 7xy + 53",
        },
        correct: "a",
        explanation:
          "Distribute the minus: (7x + 30xy − 28y) − 14x + 29xy + 25y. Combine like terms: 7x − 14x = −7x; 30xy + 29xy = 59xy; −28y + 25y = −3y.",
      },
      {
        id: "t3q26",
        testId: "Test 3",
        difficulty: "medium",
        text: `Find the product:<br><code>(5a + 6c)(5a - 6c)</code>`,
        choices: {
          a: "25a² + 60ac - 36c²",
          b: "25a² - 36c²",
          c: "25a² - 60ac - 36c²",
          d: "5a² - 6c²",
        },
        correct: "b",
        explanation:
          "This is a difference of squares: (5a)² − (6c)² = 25a² − 36c². Cross terms cancel.",
      },
      {
        id: "t3q27",
        testId: "Test 3",
        difficulty: "easy",
        text: `Which equation illustrates the <strong>associative property</strong> of addition?`,
        choices: {
          a: "(9 + 2) + 0 = (9 + 2)",
          b: "(9 + 2) + 4 = 9 + (2 + 9)",
          c: "(9 + 2) + 4 = 9 + (2 + 4)",
          d: "(9 + 2) + 4 = (2 + 9) + 4",
        },
        correct: "c",
        explanation:
          "The associative property changes the grouping (parentheses) but not the order: (a + b) + c = a + (b + c). Option C matches this with the same numbers simply regrouped.",
      },
      {
        id: "t3q28",
        testId: "Test 3",
        difficulty: "medium",
        text: `Factor completely:<br><code>2x² - 16x + 32</code>`,
        choices: {
          a: "2(x - 16)(x + 1)",
          b: "(2x - 8)(x - 4)",
          c: "Prime",
          d: "2(x - 4)(x - 4)",
        },
        correct: "d",
        explanation:
          "Factor out 2: 2(x² − 8x + 16). Inside, x² − 8x + 16 = (x − 4)². So the final factorization is 2(x − 4)(x − 4).",
      },
      {
        id: "t3q29",
        testId: "Test 3",
        difficulty: "medium",
        text: `Factor completely:<br><code>3x² - 15x + 18</code>`,
        choices: {
          a: "Prime",
          b: "3(x - 2)(x - 3)",
          c: "(3x - 6)(x - 3)",
          d: "3(x - 6)(x + 1)",
        },
        correct: "b",
        explanation:
          "Factor out 3: 3(x² − 5x + 6). Then x² − 5x + 6 factors as (x − 2)(x − 3). So 3(x − 2)(x − 3).",
      },
      {
        id: "t3q30",
        testId: "Test 3",
        difficulty: "medium",
        text: `Multiply and simplify:<br><code>(3z³ / 5) · (40 / z²)</code>`,
        choices: {
          a: "24z",
          b: "z / 24",
          c: "24 / z",
          d: "24z² / z³",
        },
        correct: "a",
        explanation:
          "Multiply coefficients: (3 × 40)/5 = 120/5 = 24. For z: z³ / z² = z¹ = z. So the product is 24z.",
      },
      {
        id: "t3q31",
        testId: "Test 3",
        difficulty: "easy",
        text: `Simplify:<br><code>-8√3 + 6√3</code>`,
        choices: {
          a: "-48√6",
          b: "-2√3",
          c: "-2√6",
          d: "-14√3",
        },
        correct: "b",
        explanation:
          "Both terms are like terms with √3. Combine coefficients: (−8 + 6)√3 = −2√3.",
      },
      {
        id: "t3q32",
        testId: "Test 3",
        difficulty: "medium",
        text: `Simplify:<br><code>-5√108 + 6√48</code>`,
        choices: {
          a: "-54√3",
          b: "-6√3",
          c: "54√3",
          d: "6√3",
        },
        correct: "b",
        explanation:
          "Simplify each radical: √108 = √(36·3) = 6√3, so −5√108 = −5·6√3 = −30√3. √48 = √(16·3) = 4√3, so 6√48 = 6·4√3 = 24√3. Sum: −30√3 + 24√3 = −6√3.",
      },
      {
        id: "t3q33",
        testId: "Test 3",
        difficulty: "medium",
        text: `Evaluate:<br><code>-5^{-4}</code>`,
        choices: {
          a: "1/20",
          b: "625",
          c: "-1/625",
          d: "-625",
        },
        correct: "c",
        explanation:
          "First compute 5^{-4} = 1 / 5^4 = 1 / 625. The negative in front makes it −1/625.",
      },
      {
        id: "t3q34",
        testId: "Test 3",
        difficulty: "medium",
        text: `Add and write in lowest terms:<br><code>(-7x + 6)/x + (-9x + 9)/(5x)</code>`,
        choices: {
          a: "(-44x - 21) / (5x)",
          b: "(-44x + 39) / (5x²)",
          c: "(-26x + 39) / (5x)",
          d: "(-44x + 39) / (5x)",
        },
        correct: "d",
        explanation:
          "Use common denominator 5x. Rewrite first fraction: multiply top and bottom by 5 → (-35x + 30)/(5x). Add numerators: (-35x + 30) + (-9x + 9) = -44x + 39. So the result is (-44x + 39)/(5x).",
      },
      {
        id: "t3q35",
        testId: "Test 3",
        difficulty: "easy",
        text: `A rectangle has length 10 ft and width 12 ft. What is its perimeter?`,
        choices: {
          a: "22 ft",
          b: "44 ft",
          c: "88 ft",
          d: "32 ft",
        },
        correct: "b",
        explanation:
          "Perimeter of a rectangle is 2L + 2W = 2·10 + 2·12 = 20 + 24 = 44 ft.",
      },
    ];

    // Test 4 – factoring & exponents
    const test4Questions = [
      {
        id: "t4q1",
        testId: "Test 4",
        difficulty: "easy",
        text: `Factor completely:<br><code>x² - 5x + 6</code>`,
        choices: {
          a: "(x - 3)(x - 2)",
          b: "(x + 3)(x + 2)",
          c: "(x - 6)(x + 1)",
          d: "Prime",
        },
        correct: "a",
        explanation:
          "We need two numbers with product 6 and sum −5 → −2 and −3. So x² − 5x + 6 = (x − 2)(x − 3). Order of the factors does not matter.",
      },
      {
        id: "t4q2",
        testId: "Test 4",
        difficulty: "medium",
        text: `Expand and simplify:<br><code>(x + 3)²</code>`,
        choices: {
          a: "x² + 6x + 9",
          b: "x² + 9",
          c: "x² + 3x + 3",
          d: "x² + 3",
        },
        correct: "a",
        explanation:
          "Use (a + b)² = a² + 2ab + b². Here a = x, b = 3 → x² + 2·x·3 + 3² = x² + 6x + 9.",
      },
      {
        id: "t4q3",
        testId: "Test 4",
        difficulty: "medium",
        text: `Find the product:<br><code>(x - 2)(x + 2)</code>`,
        choices: {
          a: "x² + 4",
          b: "x² - 4",
          c: "x² - 2x + 2",
          d: "x² + 2x - 4",
        },
        correct: "b",
        explanation:
          "This is a difference of squares: (x − 2)(x + 2) = x² − 4.",
      },
      {
        id: "t4q4",
        testId: "Test 4",
        difficulty: "medium",
        text: `Evaluate:<br><code>2^{-3}</code>`,
        choices: {
          a: "1/6",
          b: "1/8",
          c: "−1/8",
          d: "−8",
        },
        correct: "b",
        explanation:
          "Negative exponent: 2⁻³ = 1 / 2³ = 1 / 8.",
      },
      {
        id: "t4q5",
        testId: "Test 4",
        difficulty: "hard",
        text: `Factor completely:<br><code>4x² - 9</code>`,
        choices: {
          a: "(2x - 3)(2x + 3)",
          b: "(4x - 9)(4x + 9)",
          c: "(2x - 9)(2x + 9)",
          d: "Prime",
        },
        correct: "a",
        explanation:
          "4x² − 9 is (2x)² − 3², a difference of squares, so it factors as (2x − 3)(2x + 3).",
      },
    ];

    // Collect all tests into one object for easier access
    const QUESTION_SETS = {
      test1: test1Questions,
      test2: test2Questions,
      test3: test3Questions,
      test4: test4Questions,
    };

    // ============================
    // Quiz logic
    // ============================
    let currentQuiz = [];
    let currentIndex = 0;
    let userAnswers = {};
    let currentMode = "test3";

    function shuffle(array) {
      const arr = array.slice();
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        const tmp = arr[i];
        arr[i] = arr[j];
        arr[j] = tmp;
      }
      return arr;
    }

    function getAllQuestions() {
      let out = [];
      Object.keys(QUESTION_SETS).forEach(function (key) {
        out = out.concat(QUESTION_SETS[key]);
      });
      return out;
    }

    function startQuiz() {
      const mode = document.getElementById("modeSelect").value;
      const diff = document.getElementById("difficultySelect").value;
      const countValue = document.getElementById("questionCount").value;
      const requestedCount = parseInt(countValue, 10);

      let pool;
      if (mode === "all") {
        pool = getAllQuestions();
      } else {
        pool = QUESTION_SETS[mode] ? QUESTION_SETS[mode].slice() : [];
      }

      if (!pool || pool.length === 0) {
        alert("There are no questions for that mode yet.");
        return;
      }

      if (diff !== "any") {
        pool = pool.filter(function (q) {
          return q.difficulty === diff;
        });
      }

      if (pool.length === 0) {
        alert("No questions match that difficulty level for this mode.");
        return;
      }

      pool = shuffle(pool);

      let limit = pool.length;
      if (!isNaN(requestedCount) && requestedCount > 0 && requestedCount < limit) {
        limit = requestedCount;
      }

      currentQuiz = pool.slice(0, limit);
      currentIndex = 0;
      userAnswers = {};
      currentMode = mode;

      document.getElementById("setup").classList.add("hidden");
      document.getElementById("quiz").classList.remove("hidden");
      document.getElementById("results").classList.add("hidden");

      renderQuestion();
    }

    function renderQuestion() {
      const q = currentQuiz[currentIndex];
      const total = currentQuiz.length;
      const qNum = currentIndex + 1;

      const header = document.getElementById("questionCounter");
      header.textContent =
        "Question " +
        qNum +
        " of " +
        total +
        "  •  Test: " +
        q.testId +
        "  •  Difficulty: " +
        q.difficulty;

      document.getElementById("questionText").innerHTML = q.text;

      const choicesDiv = document.getElementById("choices");
      choicesDiv.innerHTML = "";

      const saved = userAnswers[q.id] ? userAnswers[q.id].choiceId : null;

      Object.keys(q.choices).forEach(function (letter) {
        const choiceText = q.choices[letter];
        const label = document.createElement("label");
        label.className = "choice-label";

        const input = document.createElement("input");
        input.type = "radio";
        input.name = "choice";
        input.value = letter;
        if (saved === letter) {
          input.checked = true;
        }

        const span = document.createElement("span");
        span.className = "choice-text";
        span.innerHTML = "<strong>" + letter.toUpperCase() + ".</strong> " + choiceText;

        label.appendChild(input);
        label.appendChild(span);
        choicesDiv.appendChild(label);
      });

      document.getElementById("feedback").innerHTML = "";
      document.getElementById("checkButton").disabled = false;

      const prevButton = document.getElementById("prevButton");
      const nextButton = document.getElementById("nextButton");

      prevButton.disabled = currentIndex === 0;
      nextButton.disabled = true;
      nextButton.textContent = currentIndex === total - 1 ? "Finish quiz" : "Next question ⟩";
    }

    function checkAnswer() {
      const q = currentQuiz[currentIndex];
      const selected = document.querySelector('input[name="choice"]:checked');

      if (!selected) {
        alert("Please select an answer first.");
        return;
      }

      const chosen = selected.value;
      const isCorrect = chosen === q.correct;
      userAnswers[q.id] = { choiceId: chosen, isCorrect: isCorrect };

      const feedbackDiv = document.getElementById("feedback");
      let html = "";

      if (isCorrect) {
        html +=
          '<p class="correct">✅ Correct! (' +
          chosen.toUpperCase() +
          " is the right answer.)</p>";
      } else {
        html +=
          '<p class="incorrect">❌ Not quite. You chose ' +
          chosen.toUpperCase() +
          ", but the correct answer is " +
          q.correct.toUpperCase() +
          ".</p>";
      }

      html +=
        '<p class="explanation"><strong>Explanation:</strong> ' +
        q.explanation +
        "</p>";

      feedbackDiv.innerHTML = html;
      document.getElementById("nextButton").disabled = false;
    }

    function nextQuestion() {
      if (currentIndex < currentQuiz.length - 1) {
        currentIndex += 1;
        renderQuestion();
      } else {
        finishQuiz();
      }
    }

    function prevQuestion() {
      if (currentIndex > 0) {
        currentIndex -= 1;
        renderQuestion();
      }
    }

    function finishQuiz() {
      const total = currentQuiz.length;
      let correctCount = 0;

      for (let i = 0; i < total; i++) {
        const q = currentQuiz[i];
        const ans = userAnswers[q.id];
        if (ans && ans.isCorrect) {
          correctCount += 1;
        }
      }

      const percent = Math.round((correctCount / total) * 100);

      document.getElementById("quiz").classList.add("hidden");
      const results = document.getElementById("results");
      results.classList.remove("hidden");

      const summary = document.getElementById("summary");
      summary.innerHTML =
        "You answered <strong>" +
        correctCount +
        "</strong> out of <strong>" +
        total +
        "</strong> correctly (" +
        percent +
        "%).";

      const reviewList = document.getElementById("reviewList");
      reviewList.innerHTML = "";

      for (let i = 0; i < total; i++) {
        const q = currentQuiz[i];
        const ans = userAnswers[q.id];
        const chosen = ans ? ans.choiceId.toUpperCase() : "—";
        const correctLetter = q.correct.toUpperCase();
        const icon = ans && ans.isCorrect ? "✅" : "❌";

        const li = document.createElement("li");
        li.innerHTML =
          icon +
          " Question " +
          (i + 1) +
          ": correct answer <strong>" +
          correctLetter +
          "</strong>, your answer <strong>" +
          chosen +
          "</strong>.<br><span class=\"explanation\">" +
          q.explanation +
          "</span>";
        reviewList.appendChild(li);
      }
    }

    function restartQuiz() {
      currentQuiz = [];
      currentIndex = 0;
      userAnswers = {};
      document.getElementById("setup").classList.remove("hidden");
      document.getElementById("quiz").classList.add("hidden");
      document.getElementById("results").classList.add("hidden");
    }

    // Hook up event listeners
    document.addEventListener("DOMContentLoaded", function () {
      document.getElementById("startButton").addEventListener("click", startQuiz);
      document.getElementById("checkButton").addEventListener("click", checkAnswer);
      document.getElementById("nextButton").addEventListener("click", nextQuestion);
      document.getElementById("prevButton").addEventListener("click", prevQuestion);
      document.getElementById("restartButton").addEventListener("click", restartQuiz);
    });
  </script>
</body>
</html>
