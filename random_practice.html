<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Random Practice Generator — Algebra Units 5–9</title>
<meta name="description" content="Generate randomized practice for linear equations, inequalities, factoring, slope, and quadratics with notebook-style steps. Works on any device." />
<style>
  :root{--bg:#0b0e11;--card:#12161c;--ink:#e9edf1;--muted:#b8c1cc;--accent:#4da3ff;--line:#1f2a36;--ok:#19c37d;--bad:#ff5c5c}
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.5 system-ui,Segoe UI,Roboto,Helvetica,Arial}
  header,main,footer{max-width:980px;margin:auto;padding:16px}
  h1{font-size:1.3rem;margin:0 0 8px}
  p{color:var(--muted);margin:8px 0}
  .card{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:16px;margin:14px 0}
  .grid{display:grid;grid-template-columns:1fr;gap:12px}
  @media(min-width:760px){.grid{grid-template-columns:repeat(2,1fr)}}
  fieldset{border:1px solid var(--line);border-radius:10px;padding:10px}
  legend{color:var(--muted)}
  label{display:flex;gap:8px;align-items:center;margin:6px 0}
  input[type=number]{width:100%;max-width:160px;padding:8px;border-radius:8px;border:1px solid var(--line);background:#0f141a;color:var(--ink)}
  button{appearance:none;border:1px solid var(--line);background:#0e3a66;color:#eaf3ff;border-radius:8px;padding:10px 14px;cursor:pointer}
  button:hover{filter:brightness(1.08)}
  .qa{margin:10px 0;padding:12px;border:1px solid var(--line);border-radius:10px;background:#0f141a}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  .result{font-weight:600;margin-top:8px}
  .ok{color:var(--ok)} .bad{color:var(--bad)}
  details{background:#0b1117;border:1px dashed var(--line);border-radius:10px;padding:10px}
  summary{cursor:pointer;color:var(--accent)}
  a{color:var(--accent);text-decoration:none}
</style>
</head>
<body>
<header>
  <h1>Random Practice Generator — Units 5–9</h1>
  <p>Select topics, generate a custom quiz, and reveal detailed notebook‑style steps on each problem.</p>
  <div class="row">
    <a href="index.html">Home</a> •
    <a href="practice_exam1.html">Practice Exam 1</a> •
    <a href="references.html">References / Videos</a>
  </div>
</header>

<main>
  <section class="card">
    <div class="grid">
      <fieldset>
        <legend>Topics</legend>
        <label><input type="checkbox" class="topic" value="lin1" checked /> Linear equations (ax + b = c)</label>
        <label><input type="checkbox" class="topic" value="ineq" checked /> Inequalities (flip sign when ÷ by −)</label>
        <label><input type="checkbox" class="topic" value="slope" checked /> Slope from two points</label>
        <label><input type="checkbox" class="topic" value="fac1" checked /> Factoring trinomials (a = 1)</label>
        <label><input type="checkbox" class="topic" value="facA" checked /> Factoring trinomials (a ≠ 1, ac‑method)</label>
        <label><input type="checkbox" class="topic" value="quad" checked /> Quadratics (solve by factoring)</label>
      </fieldset>
      <fieldset>
        <legend>Options</legend>
        <label>Number of Questions
          <input type="number" id="count" min="3" max="25" value="10" />
        </label>
        <div class="row">
          <button id="gen">Generate Quiz</button>
          <button id="clear">Reset</button>
        </div>
      </fieldset>
    </div>
  </section>

  <section id="quiz"></section>
</main>

<footer class="card">
  <p>Skill breakdown mirrors OER Units 5–9 (polynomials, factoring, rationals, radicals, quadratics). For study notes/videos, see <a href="references.html">References</a>. </p>
</footer>

<script>
function randInt(lo, hi){ return Math.floor(Math.random()*(hi-lo+1))+lo; }
function coin(){ return Math.random()<0.5? -1 : 1; }
function gcd(a,b){ a=Math.abs(a); b=Math.abs(b); while(b){ const t=b; b=a%b; a=t; } return a||1; }
function simplifyFrac(n,d){ const g=gcd(n,d); return [n/g,d/g]; }

/* Generators return { prompt, answerText, steps } */
function genLinearEq(){
  // (ax + b = c) with integer solution
  const a = coin()*randInt(2,8);
  const x = coin()*randInt(1,12);
  const b = coin()*randInt(0,15);
  const c = a*x + b;
  const steps = [
    `Start: ${a}x + ${b} = ${c}`,
    `Subtract ${b} from both sides → ${a}x = ${c-b}`,
    `Divide both sides by ${a} → x = ${(c-b)}/${a} = ${x}`
  ];
  return {
    prompt:`Solve: ${a}x + ${b} = ${c}`,
    answerText:`x = ${x}`,
    steps
  };
}

function genInequality(){
  // kx ≤ c with negative k to force flip
  const k = -1 * randInt(2,9);
  const x = coin()*randInt(0,6);
  const c = k*x;
  const steps = [
    `Start: ${k}x ≤ ${c}`,
    `Divide both sides by ${k} (negative) → flip ≤ to ≥`,
    `x ≥ ${c}/${k} = ${x}`,
    `Interval notation: [${x}, ∞)`
  ];
  return {
    prompt:`Solve and give interval: ${k}x ≤ ${c}`,
    answerText:`x ≥ ${x}  (interval [${x}, ∞))`,
    steps
  };
}

function genSlope(){
  const x1=randInt(-10,10), y1=randInt(-10,10);
  let x2=randInt(-10,10); while(x2===x1) x2=randInt(-10,10);
  const y2=randInt(-10,10);
  let num = y2 - y1, den = x2 - x1;
  const sign = (num<0)^(den<0)? '-' : '';
  [num,den]=simplifyFrac(Math.abs(num),Math.abs(den));
  const m = den===1? `${sign}${num}` : `${sign}${num}/${den}`;
  const steps = [
    `m = (y₂ − y₁) / (x₂ − x₁) = (${y2} − ${y1}) / (${x2} − ${x1})`,
    `m = ${(y2-y1)} / ${(x2-x1)} = ${m}`
  ];
  return {
    prompt:`Find the slope through (${x1}, ${y1}) and (${x2}, ${y2}).`,
    answerText:`m = ${m}`,
    steps
  };
}

function genFactorAeq1(){
  // (x^2 + bx + c) with integers p,q → b=p+q, c=pq
  const p = coin()*randInt(1,10);
  let q = coin()*randInt(1,10);
  const b = p+q, c = p*q;
  const steps = [
    `x² + ${b}x + ${c} → find integers whose product is ${c} and sum is ${b}.`,
    `Numbers: ${p} and ${q}.`,
    `Factor: (x + ${p})(x + ${q}).`
  ];
  return {
    prompt:`Factor: x² + ${b}x + ${c}`,
    answerText:`(x + ${p})(x + ${q})`,
    steps
  };
}

function genFactorAneq1(){
  // (a x^2 + b x + c) with a in 2..5, choose (a*r)(x + s)(px + q) style via ac method
  const a = randInt(2,5);
  const r = coin()*randInt(1,9);
  const s = coin()*randInt(1,9);
  // build (ax + ?)(x + ?): choose factorization (a x + s)(x + r) = a x^2 + (ar + s) x + s r
  const b = a*r + s;
  const c = s*r;
  const steps = [
    `${a}x² + ${b}x + ${c}.`,
    `ac = ${a}·${c} = ${a*c}. Find two integers with product ${a*c} and sum ${b}.`,
    `Here they are ${a*r} and ${s}. Split: ${a}x² + ${a*r}x + ${s}x + ${c}.`,
    `Group: ${a}x(x + ${r}) + ${s}(x + ${r}) = (x + ${r})(${a}x + ${s}).`
  ];
  return {
    prompt:`Factor: ${a}x² + ${b}x + ${c}`,
    answerText:`(x + ${r})(${a}x + ${s})`,
    steps
  };
}

function genQuadratic(){
  // (x - p)(x + q) = 0 form → integer roots
  const p = randInt(1,10), q = randInt(1,10);
  const b = q - p, c = -p*q;
  const steps = [
    `x² + ${b}x ${c<0?'-':'+'} ${Math.abs(c)} = 0`,
    `Factor: (x − ${p})(x + ${q}) = 0`,
    `Solutions: x = ${p} or x = −${q}`
  ];
  return {
    prompt:`Solve: x² + ${b}x ${c<0?'-':'+'} ${Math.abs(c)} = 0`,
    answerText:`x = ${p} or x = −${q}`,
    steps
  };
}

const genByKey = {
  lin1: genLinearEq,
  ineq: genInequality,
  slope: genSlope,
  fac1: genFactorAeq1,
  facA: genFactorAneq1,
  quad: genQuadratic
};

const quiz = document.getElementById('quiz');
document.getElementById('gen').addEventListener('click', ()=>{
  const wanted = [...document.querySelectorAll('.topic:checked')].map(el=>el.value);
  const n = Math.max(3, Math.min(25, +document.getElementById('count').value||10));
  if(!wanted.length){ alert('Pick at least one topic.'); return; }
  const items=[];
  for(let i=0;i<n;i++){
    const key = wanted[i % wanted.length]; // cycle topics for variety
    items.push(genByKey[key]());
  }
  render(items);
});
document.getElementById('clear').addEventListener('click', ()=> quiz.innerHTML='');

function render(items){
  quiz.innerHTML = items.map((it,idx)=>`
    <article class="qa">
      <h3>Q${idx+1}</h3>
      <p>${it.prompt}</p>
      <div class="row">
        <label>Answer:
          <input type="text" id="ans${idx}" placeholder="type your answer"/>
        </label>
        <button data-i="${idx}" class="chk">Check</button>
      </div>
      <div id="res${idx}" class="result" aria-live="polite"></div>
      <details><summary>Show steps</summary><ol>${it.steps.map(s=>`<li>${s}</li>`).join('')}</ol></details>
      <details><summary>Reveal exact answer</summary><p>${it.answerText}</p></details>
    </article>
  `).join('');

  quiz.querySelectorAll('.chk').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const i = +btn.dataset.i;
      const val = (document.getElementById('ans'+i).value||'').trim();
      const correct = items[i].answerText.replace(/\s+/g,'').toLowerCase();
      const user = val.replace(/\s+/g,'').toLowerCase();
      const res = document.getElementById('res'+i);
      if(!val){ res.innerHTML = '<span class="bad">Enter an answer first.</span>'; return; }
      if(correct===user){ res.innerHTML = '<span class="ok">Correct ✔</span>'; }
      else{ res.innerHTML = `<span class="bad">Not quite. Expected something equivalent to: <code>${items[i].answerText}</code></span>`; }
    });
  });
}

/* PWA */
if('serviceWorker' in navigator){
  navigator.serviceWorker.register('./sw.js').catch(()=>{});
}
</script>
</body>
</html>
