<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Algebra Master: The Complete Collection</title>
<style>
  :root {
    --bg: #0f172a;       /* Dark Navy */
    --card: #1e293b;     /* Slate */
    --text: #f8fafc;     /* White/Grey */
    --primary: #6366f1;  /* Indigo */
    --primary-hover: #4f46e5;
    --success: #10b981;
    --error: #ef4444;
    --border: #334155;
  }

  * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

  body {
    font-family: system-ui, -apple-system, sans-serif;
    background-color: var(--bg);
    color: var(--text);
    margin: 0;
    padding: 15px;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: flex-start;
  }

  .app-frame {
    width: 100%;
    max-width: 900px;
    background: var(--card);
    border-radius: 16px;
    padding: 24px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.6);
    border: 1px solid var(--border);
  }

  h1 { text-align: center; color: var(--primary); margin: 0 0 10px 0; font-size: 1.8rem; }
  h2 { text-align: center; color: #94a3b8; font-size: 0.95rem; margin-bottom: 25px; font-weight: normal; }

  /* CONTROLS */
  .control-group { margin-bottom: 20px; }
  label { display: block; margin-bottom: 8px; font-weight: bold; color: #cbd5e1; font-size: 0.9rem; }
  
  select, input {
    width: 100%; padding: 14px; border-radius: 10px;
    background: #0f172a; border: 1px solid var(--border); color: white;
    font-size: 1rem; appearance: none;
  }
  
  .btn {
    width: 100%; padding: 16px; border: none; border-radius: 10px;
    font-size: 1.1rem; font-weight: 700; cursor: pointer;
    background: var(--primary); color: white; transition: transform 0.1s;
  }
  .btn:active { transform: scale(0.98); }
  .btn-outline { background: transparent; border: 2px solid var(--border); color: #94a3b8; margin-top: 15px; }

  /* QUIZ UI */
  .hidden { display: none !important; }
  
  .header-row { display: flex; justify-content: space-between; margin-bottom: 20px; color: #94a3b8; font-size: 0.9rem; }
  .badge { background: #334155; padding: 4px 10px; border-radius: 6px; font-weight: bold; font-size: 0.75rem; letter-spacing: 1px; }

  .question-box {
    background: #0f172a; padding: 20px; border-radius: 12px;
    border-left: 5px solid var(--primary); margin-bottom: 20px;
    font-size: 1.2rem; line-height: 1.5;
  }

  .options-list { display: grid; gap: 12px; }
  .option-btn {
    background: var(--card); border: 2px solid var(--border);
    padding: 16px; border-radius: 10px; color: var(--text);
    text-align: left; cursor: pointer; font-size: 1rem;
    display: flex; align-items: center; transition: 0.2s;
  }
  .option-btn:hover { border-color: var(--primary); }
  .option-btn.selected { border-color: var(--primary); background: rgba(99, 102, 241, 0.15); }
  
  .circle {
    width: 22px; height: 22px; border-radius: 50%; border: 2px solid #64748b;
    margin-right: 15px; flex-shrink: 0;
  }
  .option-btn.selected .circle { background: var(--primary); border-color: var(--primary); }

  /* FEEDBACK */
  .feedback { margin-top: 25px; padding: 20px; border-radius: 12px; display: none; }
  .feedback.correct { background: rgba(16, 185, 129, 0.15); border: 1px solid var(--success); }
  .feedback.wrong { background: rgba(239, 68, 68, 0.15); border: 1px solid var(--error); }
  .explanation { margin-top: 10px; padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.1); font-size: 0.95rem; color: #cbd5e1; }

  /* MATH */
  sup { font-size: 0.7em; vertical-align: super; }
</style>
</head>
<body>

<div class="app-frame">
  <h1>Algebra Master</h1>
  <h2>4 Full Tests • Infinite Generator</h2>

  <div id="view-menu">
    <div class="control-group">
      <label>Select Practice Set</label>
      <select id="sourceSelect">
        <optgroup label="Official Tests (Complete)">
          <option value="p1">Practice Test 1 (35 Questions)</option>
          <option value="p2">Practice Test 2 (35 Questions)</option>
          <option value="p3">Final Review (35 Questions)</option>
          <option value="p4">Boot Camp / Exit Exam (35 Questions)</option>
          <option value="all">Mix All Tests (140 Questions)</option>
        </optgroup>
        <optgroup label="Training Mode">
          <option value="infinite" selected>⚡ Infinite Generator (Random)</option>
        </optgroup>
      </select>
    </div>

    <div class="control-group">
      <label>Settings (Infinite Mode Only)</label>
      <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
        <select id="diffSelect">
          <option value="standard">Standard</option>
          <option value="hard">Hard</option>
        </select>
        <input type="number" id="qCount" value="10" min="5" max="140">
      </div>
    </div>

    <button type="button" class="btn" onclick="Engine.start()">Start Practice</button>
  </div>

  <div id="view-quiz" class="hidden">
    <div class="header-row">
      <span id="progressText">Question 1</span>
      <span id="modeBadge" class="badge">TEST</span>
    </div>

    <div id="questionText" class="question-box"></div>
    <div id="optionsArea" class="options-list"></div>

    <div id="feedbackArea" class="feedback"></div>

    <div style="margin-top:20px; display:flex; gap:10px;">
      <button type="button" id="checkBtn" class="btn" onclick="Engine.check()">Check Answer</button>
      <button type="button" id="nextBtn" class="btn hidden" style="background:#475569;" onclick="Engine.next()">Next Question ❯</button>
    </div>

    <button type="button" class="btn btn-outline" onclick="Engine.menu()">Exit</button>
  </div>

  <div id="view-results" class="hidden" style="text-align:center;">
    <h2 style="font-size:2rem; color:white;">Session Complete!</h2>
    <div id="finalScore" style="font-size:4rem; font-weight:bold; color:var(--primary); margin:20px 0;"></div>
    <p id="finalMsg" style="color:#cbd5e1; margin-bottom:30px;"></p>
    <button type="button" class="btn" onclick="Engine.menu()">Back to Menu</button>
  </div>
</div>

<script>
/** * ========================================================
 * DATABASE: 4 FULL TESTS (Transcribed from PDFs)
 * ========================================================
 */
const DB = {
  // --- PRACTICE 1 (MA025 Form 2) ---
  p1: [
    {q: "Simplify: -5x<sup>6</sup>(-6x - 7)", a: "30x<sup>7</sup> + 35x<sup>6</sup>", c: ["65x<sup>6</sup>", "30x + 35", "30x<sup>7</sup> - 7"], e: "Distribute -5x<sup>6</sup>: <br>(-5x<sup>6</sup>)(-6x) = 30x<sup>7</sup> <br>(-5x<sup>6</sup>)(-7) = 35x<sup>6</sup>"},
    {q: "Solve: 4(2z - 2) = 7(z + 4)", a: "36", c: ["20", "24", "-20"], e: "8z - 8 = 7z + 28 <br>z - 8 = 28 <br>z = 36"},
    {q: "Solve: 2/5 x - 1/3 x = 4", a: "60", c: ["120", "-120", "-60"], e: "Common denom (15): <br>6x - 5x = 60 <br>x = 60"},
    {q: "A factor of x<sup>2</sup> - 4x - 21 is", a: "(x + 3)", c: ["(x - 3)", "(x + 7)", "(x + 8)"], e: "Factors are (x - 7)(x + 3)"},
    {q: "Solve: -7x + 4 + 8x = 0", a: "{-4}", c: ["{4}", "{0.3}", "{3.25}"], e: "x + 4 = 0 -> x = -4"},
    {q: "Evaluate 10x<sup>2</sup> + 8y for x=2, y=3", a: "64", c: ["360", "106", "424"], e: "10(4) + 8(3) = 40 + 24 = 64"},
    {q: "Evaluate (x+y)/(4x-14) for x=5, y=3", a: "4/3", c: ["5/6", "2/5", "8/51"], e: "(5+3)/(20-14) = 8/6 = 4/3"},
    {q: "Product of -3 and 7, subtracted from -4", a: "17", c: ["-25", "84", "-7"], e: "-4 - (-21) = -4 + 21 = 17"},
    {q: "60 cars, 30% are two-door. How many two-door?", a: "18 cars", c: ["200 cars", "180 cars", "20 cars"], e: "0.30 * 60 = 18"},
    {q: "2 hours for 10 pages. How long for 35 pages?", a: "7 hours", c: ["4 hours", "3 hours", "5 hours"], e: "Rate = 5 pages/hr. 35/5 = 7 hours"},
    {q: "Expand (5a - 9)<sup>2</sup>", a: "25a<sup>2</sup> - 90a + 81", c: ["5a<sup>2</sup> + 81", "5a<sup>2</sup> - 90a + 81", "25a<sup>2</sup> + 81"], e: "(5a-9)(5a-9) = 25a<sup>2</sup> - 45a - 45a + 81"},
    {q: "Factor 3x<sup>2</sup> - 12x + 12", a: "3(x - 2)(x - 2)", c: ["(3x - 6)(x - 2)", "3(x - 4)(x + 1)", "3(x - 2)(x + 2)"], e: "3(x<sup>2</sup> - 4x + 4) = 3(x-2)<sup>2</sup>"},
    {q: "Factor 6z<sup>2</sup> + 5z - 6", a: "(2z + 3)", c: ["(6z - 2)", "(6z + 2)", "(2z - 3)"], e: "(2z + 3)(3z - 2)"},
    {q: "Solve x<sup>2</sup> - x = 20", a: "{-4, 5}", c: ["{1, 20}", "{4, 5}", "{-4, -5}"], e: "x<sup>2</sup> - x - 20 = 0 -> (x-5)(x+4)=0"},
    {q: "Simplify (2x<sup>2</sup>/4) * (24/x<sup>3</sup>)", a: "12/x", c: ["48x<sup>2</sup>/4x<sup>3</sup>", "x/12", "12x<sup>2</sup>/x<sup>3</sup>"], e: "48x<sup>2</sup> / 4x<sup>3</sup> = 12/x"},
    {q: "Simplify -3√6 + 9√54", a: "24√6", c: ["-24√6", "30√6", "6√6"], e: "-3√6 + 9(3√6) = -3√6 + 27√6 = 24√6"},
    {q: "Simplify -3√2 + 5√2", a: "2√2", c: ["-8√2", "-15√4", "2√4"], e: "(-3 + 5)√2 = 2√2"},
    {q: "Solve 3/4 t >= -24", a: "t >= -32", c: ["t <= -32", "t <= 32", "t >= 32"], e: "Multiply by 4/3: t >= -32"},
    {q: "Simplify (2x√3)<sup>2</sup>", a: "12x<sup>2</sup>", c: ["36x<sup>2</sup>", "6x<sup>2</sup>", "12x"], e: "4x<sup>2</sup> * 3 = 12x<sup>2</sup>"},
    {q: "Slope through (4, -5) and (4, 6)", a: "Undefined", c: ["3/11", "11", "11/3"], e: "x is constant (4), so vertical line."},
    {q: "Line through (7, -4) and (0, -2)", a: "y = -2/7 x - 2", c: "y = 11/2 x - 2, y = 2/7 x - 2, y = -7/2 x - 2".split(", "), e: "m = (-2 - -4)/(0 - 7) = 2/-7"},
    {q: "Remainder of (p<sup>2</sup>+3p-20)/(p+7)", a: "8", c: ["4", "-4", "-8"], e: "p=-7 -> 49 - 21 - 20 = 8"},
    {q: "Rectangle perimeter if L = w+4", a: "2(w+4) + 2w", c: "(w+4) + w, 2(w+4) + 2w, w(w+4)".split(", "), e: "P = 2L + 2W"},
    {q: "3<sup>-1</sup> + 2<sup>-1</sup>", a: "5/6", c: ["6/5", "2", "1"], e: "1/3 + 1/2 = 2/6 + 3/6 = 5/6"},
    {q: "Graph of 2y = 2", a: "Horizontal line at 1", c: ["Vertical at 1", "Diagonal", "Vertical at -1"], e: "y = 1 is horizontal"},
    {q: "Property: (5*8)*1 = 5*(8*1)", a: "Associative", c: ["Commutative", "Distributive", "Identity"], e: "Grouping changed"},
    {q: "9/z<sup>2</sup> - 6/z", a: "3(3-2z)/z<sup>2</sup>", c: "3(3+2z)/z<sup>2</sup>, 3(3-2z)/z, 3(2z-3)/z".split(", "), e: "(9 - 6z)/z<sup>2</sup> = 3(3-2z)/z<sup>2</sup>"},
    {q: "Lowest terms: (9x+15)/(12x+20)", a: "3/4", c: ["1", "3", "4/3"], e: "3(3x+5) / 4(3x+5) = 3/4"},
    {q: "Simplify (a<sup>2</sup>-4a) / (a+9)(a-4)", a: "a / (a+9)", c: "a<sup>2</sup> / (a+9), a / (a+9), 1 / (a+9)".split(", "), e: "a(a-4) / (a+9)(a-4)"},
    {q: "Solve (x+6)/4 = (x+5)/3", a: "-2", c: ["-2/7", "17", "-2/3"], e: "3x + 18 = 4x + 20 -> x = -2"},
    {q: "Solve system for y: x+6y=8, -6x+7y=-48", a: "0", c: ["-1", "8", "2"], e: "Multiply top by 6: 6x+36y=48. Add: 43y=0 -> y=0"},
    {q: "Solve system for x: x+3y=2, 3x+2y=-1", a: "-1", c: ["0", "5", "1"], e: "x = -1, y = 1"},
    {q: "Subtract (13a<sup>5</sup>+2a<sup>2</sup>) - (-15a<sup>5</sup>+14a^2)", a: "28a<sup>5</sup> - 12a<sup>2</sup>", c: "-2a<sup>5</sup>+16a<sup>2</sup>, 28a<sup>5</sup>+16a<sup>2</sup>, 16a<sup>7</sup>".split(", "), e: "13 - (-15) = 28. 2 - 14 = -12"},
    {q: "Factor x<sup>2</sup> + 7x + 6", a: "(x+1)", c: ["(x-6)", "(x+1)", "(x+2)"], e: "(x+6)(x+1)"},
    {q: "Solve V = 1/3 Bh for B", a: "B = 3V/h", c: "B = V/3h, B = 3h/V, B = h/3V".split(", "), e: "3V = Bh -> B = 3V/h"}
  ],

  // --- PRACTICE 2 (MA025B Form 2) ---
  p2: [
    {q: "Simplify -10x<sup>4</sup>(10x - 12)", a: "-100x<sup>5</sup> + 120x<sup>4</sup>", c: ["20x<sup>4</sup>", "-100x + 120", "-100x<sup>5</sup> - 12"], e: "Distribute -10x<sup>4</sup>"},
    {q: "Solve 2(2z - 2) = 3(z + 2)", a: "10", c: ["-2", "{2}", "{4}"], e: "4z - 4 = 3z + 6 -> z = 10"},
    {q: "Solve 2/5 x - 1/3 x = 2", a: "30", c: ["-60", "60", "-30"], e: "6x - 5x = 30 -> x = 30"},
    {q: "Factor x<sup>2</sup> - 5x - 66", a: "(x+6)", c: ["(x+11)", "(x-5)", "(x-6)"], e: "(x-11)(x+6)"},
    {q: "Solve 6x + 10 - 5x = 0", a: "{-10}", c: ["{10}", "{-0.7}", "{-1.3}"], e: "x + 10 = 0 -> x = -10"},
    {q: "Evaluate 2x<sup>2</sup> + 3y for x=7, y=4", a: "110", c: ["416", "53", "208"], e: "2(49) + 12 = 98 + 12 = 110"},
    {q: "Evaluate (x+y)/(15x-11) for x=4, y=5", a: "9/49", c: "4/49, 9/49, 3/20".split(", "), e: "(4+5)/(60-11) = 9/49"},
    {q: "Product of -3 and 5, subtracted from -7", a: "8", c: ["-20", "105", "-22"], e: "-7 - (-15) = 8"},
    {q: "75 cars, 60% sedans. How many sedans?", a: "45 cars", c: ["125 cars", "450 cars", "13 cars"], e: "0.60 * 75 = 45"},
    {q: "4 hours for 16 pages. How long for 28 pages?", a: "7 hours", c: ["8 hours", "3 hours", "4 hours"], e: "Rate=4 pages/hr. 28/4=7"},
    {q: "Expand (4a - 3)<sup>2</sup>", a: "16a<sup>2</sup> - 24a + 9", c: "4a<sup>2</sup>+9, 16a<sup>2</sup>-24a+9, 16a<sup>2</sup>+9".split(", "), e: "(4a-3)(4a-3) = 16a<sup>2</sup>-24a+9"},
    {q: "Factor 2x<sup>2</sup> - 8x + 8", a: "2(x-2)(x-2)", c: ["(2x-4)(x-2)", "2(x-4)(x+1)", "2(x-2)(x+2)"], e: "2(x-2)<sup>2</sup>"},
    {q: "Factor 6z<sup>2</sup> + z - 1", a: "(3z-1)", c: ["(2z-3)", "(2z-1)", "(3z+1)"], e: "(3z-1)(2z+1)"},
    {q: "Solve x<sup>2</sup> + 4x = 32", a: "{-8, 4}", c: ["{8, 4}", "{-8, 1}", "{-8, -4}"], e: "x<sup>2</sup>+4x-32=0 -> (x+8)(x-4)=0"},
    {q: "Simplify (4x<sup>2</sup>/5) * (35/x<sup>3</sup>)", a: "28/x", c: ["28x<sup>2</sup>", "140x<sup>2</sup>/5x<sup>3</sup>", "x/28"], e: "140x<sup>2</sup>/5x<sup>3</sup> = 28/x"},
    {q: "Simplify -2√3 - 4√27", a: "-14√3", c: ["14√3", "-10√3", "-6√3"], e: "-2√3 - 12√3 = -14√3"},
    {q: "Simplify -2√2 + 4√2", a: "2√2", c: ["-8√4", "2√4", "-6√2"], e: "2√2"},
    {q: "Solve 4/3 t >= -60", a: "t >= -45", c: ["t <= -45", "t >= 45", "t <= 45"], e: "Multiply by 3/4. -60 * .75 = -45"},
    {q: "Simplify (2x√4)<sup>2</sup>", a: "16x<sup>2</sup>", c: ["16x", "16x<sup>2</sup>", "8x<sup>2</sup>"], e: "(4x)<sup>2</sup> = 16x<sup>2</sup>"},
    {q: "Slope through (-3, -8) and (-3, -7)", a: "Undefined", c: ["-3", "1", "-1/3"], e: "Vertical line"},
    {q: "Line through (2, 5) and (0, 8)", a: "y = -3/2x + 8", c: ["y = 3/2x + 8", "y = -3/8x + 8", "y = 3/8x + 8"], e: "Intercept 8. Slope -1.5"},
    {q: "Remainder of (p<sup>2</sup>+4p-8)/(p+6)", a: "4", c: ["-2", "8", "-4"], e: "(-6)<sup>2</sup> + 4(-6) - 8 = 36-24-8 = 4"},
    {q: "Rectangle perimeter if L = w+4", a: "2(w+4) + 2w", c: "(w+4)+w, w(w+4), 2(w+4)+w".split(", "), e: "2L + 2W"},
    {q: "7<sup>-1</sup> + 2<sup>-1</sup>", a: "9/14", c: ["2", "1/5", "14/9"], e: "1/7 + 1/2 = 9/14"},
    {q: "Graph 3y = 3", a: "Horizontal at y=1", c: ["Vertical at 1", "Diagonal", "Vertical at -1"], e: "y=1 is horizontal"},
    {q: "Property: (9*6)*6 = 9*(6*6)", a: "Associative", c: ["Distributive", "Identity", "Commutative"], e: "Regrouping"},
    {q: "6/z<sup>2</sup> - 4/z", a: "2(3-2z)/z<sup>2</sup>", c: "2(2z-3)/z, 2(3+2z)/z<sup>2</sup>".split(", "), e: "(6-4z)/z<sup>2</sup>"},
    {q: "Lowest terms (9x+21)/(12x+28)", a: "3/4", c: ["3", "1", "4/3"], e: "3(3x+7) / 4(3x+7) = 3/4"},
    {q: "Simplify (a<sup>2</sup>-7a)/(a+6)(a-7)", a: "a/(a+6)", c: "1/(a+6), a-7/(a+6), a".split(", "), e: "a(a-7) / (a+6)(a-7)"},
    {q: "Solve (x+8)/4 = (x+7)/3", a: "-4", c: ["25", "4/7", "4/3"], e: "3x+24=4x+28 -> x=-4"},
    {q: "Solve system for y: x+8y=1, 3x+9y=3", a: "0", c: ["-1", "1", "2"], e: "3(1-8y)+9y=3 -> 3-15y=3 -> y=0"},
    {q: "Solve system for x: x+3y=1, 2x-4y=3", a: "13/10", c: ["13/10", "13", "10/13"], e: "x=1.3"},
    {q: "Subtract (17a<sup>4</sup>-11a<sup>3</sup>) - (10a<sup>4</sup>-13a<sup>3</sup>)", a: "7a<sup>4</sup> + 2a<sup>3</sup>", c: ["9a<sup>7</sup>", "7a<sup>4</sup>-24a<sup>3</sup>", "27a<sup>4</sup>-24a<sup>3</sup>"], e: "17-10=7. -11 - (-13)=2"},
    {q: "Factor x<sup>2</sup> + 3x - 70", a: "(x+10)", c: ["(x+1)", "(x-10)", "(x+7)"], e: "(x+10)(x-7)"},
    {q: "Solve H = 1/2 Bh for h", a: "h = 2H/B", c: "h = 2B/H, h = H/2B, h = B/2H".split(", "), e: "2H = Bh -> h = 2H/B"}
  ],

  // --- PRACTICE 3 (Final Review) ---
  p3: [
    {q:"Property: 5 • -2 = -2 • 5", a:"Commutative", c:["Associative", "Distributive", "Identity"], e:"Order changes = Commutative."},
    {q:"Solve P = 2L + 2W for L", a:"L = (P-2W)/2", c:["L = P - W", "L = d - 2W", "L = (P-W)/2"], e:"Subtract 2W, then divide by 2."},
    {q:"Graph y + 4 = 0", a:"Horizontal line at y=-4", c:["Vertical line at x=-4", "Line at y=4", "Line through origin"], e:"y = -4 is a horizontal line."},
    {q:"Solve system: x+9y=9, 7x-5y=-5", a:"(0, 1)", c:["(1, 0)", "(1, 1)", "(-1, -1)"], e:"If x=0, 9y=9 -> y=1. Check 2nd eq: 7(0)-5(1)=-5. Correct."},
    {q:"Solve: x<sup>2</sup> - x = 56", a:"{-7, 8}", c:["{1, 56}", "{-7, -8}", "{7, 8}"], e:"x<sup>2</sup> - x - 56 = 0. Factors of -56 adding to -1 are -8 and 7."},
    {q:"Evaluate (3x+7)/(14-2y) for x=9, y=6", a:"17", c:["39", "34", "14"], e:"Top: 27+7=34. Bottom: 14-12=2. 34/2 = 17."},
    {q:"Simplify: -5(x - 3)", a:"-5x + 15", c:["-5x - 15", "5x - 15", "5x + 15"], e:"Distribute -5."},
    {q:"Factor: 4x<sup>2</sup>y + 8y<sup>2</sup>", a:"4y(x<sup>2</sup> + 2y)", c:["y(4x<sup>2</sup> + 8y)", "4x(y + 2y)", "4xy(1 + 2y)"], e:"Greatest Common Factor is 4y."},
    {q:"Evaluate x - 2xy<sup>2</sup> for x = -1, y = -4", a:"31", c:["-17", "15", "-33"], e:"-1 - 2(-1)(16) = -1 - (-32) = -1 + 32 = 31."},
    {q:"Slope through (-9, 3) and (6, 8)", a:"1/3", c:["3", "-3", "-1/3"], e:"(8-3)/(6 - -9) = 5/15 = 1/3."},
    {q:"Solve -7x >= 21", a:"(-inf, -3]", c:["[3, inf)", "[-3, inf)", "(-inf, 3]"], e:"Divide by -7, flip inequality."},
    {q:"Equation of line (-7,1) and (10,-5)", a:"y = -6/17 x - 25/17", c:["y = 6/17 x - 25/17", "y = -8/15x + 1/3", "y = 8/15x + 1/3"], e:"m = (-5-1)/(10--7) = -6/17"},
    {q:"Factor x<sup>2</sup> + 43x + 44", a:"Prime", c:["(x+44)(x-1)", "(x+11)(x+4)", "(x+1)(x+44)"], e:"No integers multiply to 44 and add to 43."},
    {q:"Solve system by substitution: x-5y=15, -4x-4y=12", a:"(0, -3)", c:["(3,0)", "(1,-4)", "No Solution"], e:"x=5y+15. Sub in: -4(5y+15)-4y=12 -> -24y=72 -> y=-3."},
    {q:"Divide (y<sup>2</sup>+18y+81)/(y+9)", a:"y+9", c:["y-9", "y+9 / y+9", "y^2+9"], e:"Top is (y+9)^2. Result y+9."},
    {q:"Factor x<sup>2</sup> - 13x + 42", a:"(x-6)", c:["(x-7)", "7-x", "x+6"], e:"(x-7)(x-6)"},
    {q:"Product of -9 and 1 subtracted from -5", a:"4", c:["-14", "45", "-4"], e:"-5 - (-9) = 4"},
    {q:"Lowest terms (16x+20)/(20x+25)", a:"4/5", c:["5/4", "1", "4"], e:"4(4x+5)/5(4x+5) = 4/5"},
    {q:"Lowest terms (a<sup>2</sup>-6a)/(a+9)(a-6)", a:"a/(a+9)", c:["1/(a+9)", "a-6/a+9", "a^2/a+9"], e:"a(a-6)/(a+9)(a-6)"},
    {q:"Simplify (√7t + √r)<sup>2</sup>", a:"7t + 2√7tr + r", c:["49t + 14tr + r", "7t + 7tr + r", "49t + r"], e:"(a+b)^2 = a^2 + 2ab + b^2"},
    {q:"(7x+30xy-28y) - (14x-29xy-25y)", a:"-7x + 59xy - 3y", c:["-7x-59xy-53y", "49xy", "-23x+7xy+53"], e:"Combine like terms"},
    {q:"(5a+6c)(5a-6c)", a:"25a<sup>2</sup> - 36c<sup>2</sup>", c:["25a^2+60ac-36c^2", "25a^2-60ac-36c^2", "5a^2-6c^2"], e:"Difference of squares"},
    {q:"Associative Property example", a:"(9+2)+4 = 9+(2+4)", c:["9+2=2+9", "9+0=9", "9(1)=9"], e:"Grouping changed"},
    {q:"Factor 2x<sup>2</sup>-16x+32", a:"2(x-4)(x-4)", c:["2(x-16)(x+1)", "(2x-8)(x-4)", "Prime"], e:"2(x^2-8x+16) = 2(x-4)^2"},
    {q:"Factor 3x<sup>2</sup>-15x+18", a:"3(x-2)(x-3)", c:["Prime", "(3x-6)(x-3)", "3(x-6)(x+1)"], e:"3(x^2-5x+6) = 3(x-2)(x-3)"},
    {q:"Multiply (3z<sup>3</sup>/5) * (40/z<sup>2</sup>)", a:"24z", c:["z/24", "24/z", "24z^2/z^3"], e:"120z^3 / 5z^2 = 24z"},
    {q:"Simplify -8√3 + 6√3", a:"-2√3", c:["-48√6", "-2√6", "-14√3"], e:"Combine coeffs"},
    {q:"Simplify -5√108 + 6√48", a:"-6√3", c:["-54√3", "54√3", "6√3"], e:"-30√3 + 24√3 = -6√3"},
    {q:"Evaluate -5<sup>-4</sup>", a:"-1/625", c:["1/625", "625", "-625"], e:"-(1/5^4) = -1/625"},
    {q:"Add (-7x+6)/x + (-9x+9)/5x", a:"(-44x+39)/5x", c:["-44x-21/5x", "-26x+39/5x", "-44x+39/5x^2"], e:"LCD 5x. -35x+30 -9x+9 = -44x+39"},
    {q:"Perimeter of L=10, W=12", a:"44 ft", c:["22 ft", "88 ft", "32 ft"], e:"2(10)+2(12) = 20+24 = 44"},
    {q:"Baseball: +5, -3, -8, +2 games. Net?", a:"1 run", c:["2 runs", "17 runs", "-4 runs"], e:"10 - 9 - 8 + 8 = 1"},
    {q:"Discount 9% of $52. Original?", a:"$578", c:["$6", "$500", "$5"], e:"0.09x = 52 -> x = 578"},
    {q:"Solve (x-7)/4 = (x+8)/7", a:"27", c:["81/28", "7/4", "8"], e:"7x-49 = 4x+32 -> 3x=81 -> x=27"},
    {q:"Solve 6w+9 = 10-7w-6w", a:"1/19", c:["-19", "19", "-1/13"], e:"19w = 1 -> w=1/19"}
  ],

  // --- PRACTICE 4 (Boot Camp) ---
  p4: [
    {q: "Evaluate: 8 - 1 + 3<sup>-1</sup>", a: "22/3", c: ["7", "24/11", "8"], e: "8 - 1 = 7. 3<sup>-1</sup> = 1/3. 7 + 1/3 = 22/3."},
    {q: "Solve: y<sup>2</sup> = 25y", a: "{0, 25}", c: ["{-5, 5}", "{25}", "{0, 5}"], e: "y<sup>2</sup> - 25y = 0 <br>y(y - 25) = 0."},
    {q: "Solve: 36x<sup>2</sup> - 49 = 0", a: "{±7/6}", c: ["{±6/7}", "{7/6}", "{0}"], e: "x<sup>2</sup> = 49/36."},
    {q: "Solve: √(50x - 15) = 7√x", a: "{15}", c: ["{7}", "{14}", "{1}"], e: "50x - 15 = 49x -> x = 15."},
    {q: "Solve: x<sup>2</sup> - x = 20", a: "{-4, 5}", c: ["{1, 20}", "{4, 5}", "{-4, -5}"], e: "(x-5)(x+4)=0."},
    {q: "Solve: (x+6)/5 = (x+8)/7", a: "{-1}", c: ["{1}", "{2}", "{-2}"], e: "7x+42 = 5x+40 -> 2x = -2."},
    {q: "Divide: [(x<sup>2</sup>-25)/x] ÷ [(3x+15)/(x-5)]", a: "(x-5)<sup>2</sup> / 3x", c: ["3x / (x-5)<sup>2</sup>", "(x-5)<sup>2</sup> / x", "3(x+5)<sup>2</sup> / x"], e: "Flip and multiply."},
    {q: "Factor completely: x<sup>2</sup> + 16x + 64", a: "(x+8)<sup>2</sup>", c: ["(x-8)<sup>2</sup>", "(x+8)(x-8)", "Prime"], e: "Perfect square."},
    {q: "One factor of 6x<sup>2</sup> + x - 7 is:", a: "(6x+7)", c: ["(6x+1)", "(x+1)", "(6x-7)"], e: "(6x+7)(x-1)."},
    {q: "Factor: 9y<sup>2</sup> - 12y", a: "3y(3y-4)", c: ["-4y", "(3y+4)", "-3y(3y+4)"], e: "GCF 3y."},
    {q: "Equation of line through (3, -8) and (0, -3)", a: "y = -5/3x - 3", c: ["y = -11/3x - 3", "y = 5/3x - 3", "y = 11/3x - 3"], e: "m = 5/-3. b = -3."},
    {q: "Multiply: [(2r-6)/(14r<sup>2</sup>+28r)] • [(7r+14)/(12-4r)]", a: "-1 / 4r", c: ["1/4", "-2 / 4(3-r)", "(r-3)/4r(3-r)"], e: "Terms cancel to -1."},
    {q: "Solve system: x+2y=9, 7x+y=4", a: "{-1/13, 59/13}", c: ["{1/13, -59/13}", "{1/15, -59/15}", "{-1/13, -59/13}"], e: "Substitution."},
    {q: "Equation of line shown (Slope 2, Intercept -5)", a: "y = 2x - 5", c: ["y = -2x - 5", "y = -5/2x - 5", "y = -2/5x - 2"], e: "y = mx + b."},
    {q: "Simplify: -15x<sup>3</sup>y<sup>5</sup> / 5xy<sup>2</sup>", a: "-3x<sup>2</sup>y<sup>3</sup>", c: ["-3xy<sup>3</sup>", "-10x<sup>2</sup>y<sup>2</sup>", "-3x<sup>2</sup>y<sup>2</sup>"], e: "Subtract exponents."},
    {q: "Solve: 2(y+3) = 3(y-3)", a: "{15}", c: ["{-3}", "{-15}", "{3}"], e: "2y+6=3y-9 -> y=15."},
    {q: "Diff of two positive integers is 60. One is 3 times the other.", a: "30 and 90", c: ["30 and 60", "90 and 150", "60 and 90"], e: "3x - x = 60 -> 2x=60."},
    {q: "Regular price $91. Sale is 20% off. Find sale price.", a: "$72.80", c: ["$18.20", "$109.20", "$75.83"], e: "91 * 0.8 = 72.8."},
    {q: "Rectangle length is 3cm more than width. Area is 180.", a: "12 cm", c: ["18 cm", "15 cm", "13 cm"], e: "w(w+3)=180."},
    {q: "Translate: 4 times a number added to 9 times the number equals 52.", a: "4x + 9x = 52", c: ["4(9+x)=52", "4x - 9x = 52", "4(x+9)=52x"], e: "Direct translation."},
    {q: "Equation of line through (4, 10) and (-2, -7)", a: "y = 17/6x - 4/3", c: ["y = -17/6x - 4/3", "y = 6/5x - 47/5", "y = -6/5x - 47/5"], e: "Slope 17/6."},
    {q: "Factor: 2x<sup>2</sup> + 2x - 24", a: "2(x+4)(x-3)", c: ["2(x+3)(x-4)", "(x+3)(x-4)", "2(x-3)(x-4)"], e: "2(x^2+x-12)."},
    {q: "Simplify: √5(√7 - √3)", a: "√35 - √15", c: ["5√7 + 5√3", "√50", "10√5"], e: "Distribute."},
    {q: "Subtract (-7a<sup>5</sup> + 19a<sup>2</sup>) FROM (-19a<sup>5</sup> - 15a<sup>2</sup>)", a: "-12a<sup>5</sup> - 34a<sup>2</sup>", c: ["-26a<sup>5</sup> + 4a<sup>2</sup>", "a<sup>5</sup> - 34a<sup>2</sup>", "-12a<sup>5</sup> + 4a<sup>2</sup>"], e: "Subtracting from means second minus first."},
    {q: "Rationalize denominator: 3 / √(2p)", a: "3√(2p) / 2p", c: ["3√(2p)", "9√(2p) / 2p", "7p"], e: "Multiply by sqrt."},
    {q: "Add: 6/(x+6) + 2/x", a: "(8x+12)/x(x+6)", c: ["(8x+12)/x", "(6x+12)/x(x+6)", "(8x+12)/(x+6)"], e: "LCD is x(x+6)."},
    {q: "Add: 9/(x-2) + 1/(2-x)", a: "8 / (x-2)", c: ["10 / (x-2)", "9 / (x-2)", "-8 / (x-2)"], e: "Sign change on second term."},
    {q: "Multiply: (4x+8)(x+5)", a: "4x<sup>2</sup> + 28x + 40", c: ["4x<sup>2</sup> + 40x + 28", "4x<sup>2</sup> + 26x + 40", "4x<sup>2</sup> + 28x + 28"], e: "FOIL."},
    {q: "Square has Perimeter P=44. Find side x.", a: "11", c: ["6.63", "22", "5.5"], e: "44/4 = 11."},
    {q: "Divide: (3z<sup>2</sup>-19z+20) / (3z-4)", a: "z - 5", c: ["z - 5 + 3/(3z-4)", "z + 5", "z - 5 - 3/(3z-4)"], e: "Factors cancel."},
    {q: "Find slope of: x + 3 = 0", a: "Undefined", c: ["-3", "0", "1"], e: "Vertical line."},
    {q: "Solve F = 9/5 C + 32 for C", a: "C = 5/9(F - 32)", c: ["C = (F-32)/9", "C = 5/(F-32)", "C = 9/5(F-32)"], e: "Algebra manipulation."},
    {q: "Simplify: (x<sup>6</sup>/9y<sup>7</sup>) / (x<sup>2</sup>/y<sup>4</sup>)", a: "x<sup>4</sup> / 9y<sup>3</sup>", c: ["x<sup>8</sup> / 9y<sup>11</sup>", "x<sup>4</sup> / 9y<sup>11</sup>", "x<sup>4</sup> / y<sup>3</sup>"], e: "Flip and multiply."},
    {q: "Expression: 10 less than the difference between 4 and -5", a: "-1", c: ["1", "-11", "11"], e: "(4 - -5) - 10."},
    {q: "Graph x = -2", a: "Vertical line at -2", c: ["Horizontal line at -2", "Slope 1", "Slope -2"], e: "x=k is vertical."}
  ]
};

// --- INFINITE GENERATOR ---
const GEN = {
  rand: (min, max) => Math.floor(Math.random() * (max - min + 1)) + min,
  linear: (diff) => {
    let a = GEN.rand(2, 9), x = GEN.rand(-8, 8), b = GEN.rand(-10, 10);
    let c = a * x + b;
    return { q: `Solve for x: ${a}x ${b>=0?'+':''}${b} = ${c}`, a: `${x}`, c: [`${x+1}`, `${-x}`, `${x-2}`], e: `Subtract ${b}, divide by ${a}.` };
  },
  system: (diff) => {
    let x = GEN.rand(1,6), y = GEN.rand(1,6);
    return { q: `Solve: x + y = ${x+y}, x - y = ${x-y}`, a: `(${x}, ${y})`, c: [`(${y}, ${x})`, `(${x+1}, ${y})`], e: `Add equations: 2x = ${(x+y)+(x-y)}. x=${x}.` };
  },
  factor: (diff) => {
    let n1 = GEN.rand(1,6), n2 = GEN.rand(1,6);
    if(Math.random()>0.5) n1 *= -1;
    let b = n1+n2, c = n1*n2;
    return { q: `Factor: x<sup>2</sup> ${b>=0?'+':''}${b}x ${c>=0?'+':''}${c}`, a: `(x${n1>=0?'+':''}${n1})(x${n2>=0?'+':''}${n2})`, c: [`(x${-n1>=0?'+':''}${-n1})(x${n2})`, "Prime"], e: `Find numbers adding to ${b} and multiplying to ${c}.` };
  }
};

// --- ENGINE LOGIC ---
const Engine = {
  queue: [], curr: 0, score: 0,

  start: () => {
    try {
      const src = document.getElementById("sourceSelect").value;
      const count = parseInt(document.getElementById("qCount").value);
      const diff = document.getElementById("diffSelect").value;

      Engine.queue = []; Engine.score = 0; Engine.curr = 0;

      if (src === 'infinite') {
        for(let i=0; i<count; i++) {
          let r = Math.random();
          if(r<0.33) Engine.queue.push(GEN.linear(diff));
          else if(r<0.66) Engine.queue.push(GEN.system(diff));
          else Engine.queue.push(GEN.factor(diff));
        }
        document.getElementById("modeBadge").innerText = "INFINITE";
      } else {
        let pool = [];
        if (src === 'all') pool = [...DB.p4, ...DB.p3, ...DB.p2, ...DB.p1];
        else pool = DB[src];
        
        let shuffled = [...pool].sort(() => 0.5 - Math.random());
        Engine.queue = shuffled.slice(0, count);
        document.getElementById("modeBadge").innerText = src.toUpperCase();
      }

      document.getElementById("view-menu").classList.add("hidden");
      document.getElementById("view-results").classList.add("hidden");
      document.getElementById("view-quiz").classList.remove("hidden");
      Engine.render();
    } catch (err) {
      alert("Error: " + err.message);
    }
  },

  render: () => {
    const q = Engine.queue[Engine.curr];
    document.getElementById("progressText").innerText = `Question ${Engine.curr + 1} of ${Engine.queue.length}`;
    document.getElementById("questionText").innerHTML = q.q;

    let opts = [q.a, ...q.c].sort(() => 0.5 - Math.random());
    const area = document.getElementById("optionsArea");
    area.innerHTML = "";

    opts.forEach(opt => {
      let btn = document.createElement("button");
      btn.type = "button";
      btn.className = "option-btn";
      btn.innerHTML = `<div class="circle"></div> ${opt}`;
      btn.onclick = () => {
        document.querySelectorAll(".option-btn").forEach(b => b.classList.remove("selected"));
        btn.classList.add("selected");
        btn.dataset.val = (opt === q.a) ? "1" : "0";
      };
      area.appendChild(btn);
    });

    document.getElementById("feedbackArea").style.display = "none";
    document.getElementById("checkBtn").classList.remove("hidden");
    document.getElementById("nextBtn").classList.add("hidden");
  },

  check: () => {
    const sel = document.querySelector(".option-btn.selected");
    if (!sel) return alert("Select an answer!");

    const isCorrect = sel.dataset.val === "1";
    if (isCorrect) Engine.score++;

    const fb = document.getElementById("feedbackArea");
    fb.style.display = "block";
    fb.className = isCorrect ? "feedback correct" : "feedback wrong";
    fb.innerHTML = `<strong>${isCorrect ? "Correct!" : "Incorrect"}</strong><br>Answer: ${Engine.queue[Engine.curr].a}<div class="explanation">${Engine.queue[Engine.curr].e}</div>`;

    document.getElementById("checkBtn").classList.add("hidden");
    document.getElementById("nextBtn").classList.remove("hidden");
  },

  next: () => {
    Engine.curr++;
    if (Engine.curr < Engine.queue.length) Engine.render();
    else Engine.results();
  },

  results: () => {
    document.getElementById("view-quiz").classList.add("hidden");
    document.getElementById("view-results").classList.remove("hidden");
    const pct = Math.round((Engine.score / Engine.queue.length) * 100);
    document.getElementById("finalScore").innerText = pct + "%";
    document.getElementById("finalMsg").innerText = pct >= 70 ? "Ready for the exam!" : "Keep practicing.";
  },

  menu: () => {
    document.getElementById("view-results").classList.add("hidden");
    document.getElementById("view-quiz").classList.add("hidden");
    document.getElementById("view-menu").classList.remove("hidden");
  }
};
</script>
</body>
</html>
